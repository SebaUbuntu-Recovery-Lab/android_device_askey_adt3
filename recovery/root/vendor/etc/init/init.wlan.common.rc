on early-init
    insmod /vendor/lib/modules/sunxi_rfkill.ko
    # rfkill control for wifi
    chmod 0666 /sys/devices/virtual/misc/sunxi-wlan/rf-ctrl/power_state
    chmod 0666 /sys/devices/virtual/misc/sunxi-wlan/rf-ctrl/scan_device

on post-fs-data
    # Create the directories used by the Wireless subsystem
    mkdir /data/vendor/wifi 0771 wifi wifi
    mkdir /data/vendor/wifi/wpa 0770 wifi wifi
    mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi

# broadcom/realtek/xradio wifi sta p2p concurrent service
service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
    -O/data/vendor/wifi/wpa/sockets -dd \
    -g@android:wpa_wlan0
    interface aidl android.hardware.wifi.supplicant.ISupplicant/default
    socket wpa_wlan0 dgram 660 wifi wifi
    class main
    disabled
    oneshot

on property:persist.log.tag.wlan_vendor=broadcom
    setprop wifi.direct.interface p2p-dev-wlan0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 1

on property:persist.log.tag.wlan_vendor=realtek
    setprop wifi.direct.interface p2p0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 1
    setprop ro.vendor.wpa_supplicant.overlay.conf "/vendor/etc/wifi/rtk_wpa_supplicant_overlay.conf"
    setprop ro.vendor.p2p_supplicant.overlay.conf "/vendor/etc/wifi/rtk_p2p_supplicant_overlay.conf"

on property:persist.log.tag.wlan_vendor=xradio
    setprop wifi.direct.interface p2p-dev-wlan0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 0

on property:persist.log.tag.wlan_vendor=sprd
    setprop wifi.direct.interface p2p-dev-wlan0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 1

on property:persist.log.tag.wlan_vendor=aic
    setprop wifi.direct.interface p2p-dev-wlan0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 1

on property:persist.log.tag.wlan_vendor=atbm
    setprop wifi.direct.interface p2p-dev-wlan0
    setprop persist.vendor.debug.wifi.hal.preset_interface_combination_idx 0
